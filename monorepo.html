<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端技术分享</title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/w20220218/assets/style.fea2d2e9.css">
    <link rel="modulepreload" href="/w20220218/assets/Home.6aaa7bf4.js">
    <link rel="modulepreload" href="/w20220218/assets/app.b6032d24.js">
    <link rel="modulepreload" href="/w20220218/assets/monorepo.md.5bf38043.lean.js">
    
    <meta name="twitter:title" content="前端技术分享">
  <meta property="og:title" content="前端技术分享">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-44060a3c><div class="sidebar-button" data-v-44060a3c><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/w20220218/" aria-label="前端技术分享, back to home" data-v-44060a3c data-v-46e24c5a><!----> 前端技术分享</a><div class="flex-grow" data-v-44060a3c></div><div class="nav" data-v-44060a3c><!----></div><!--[--><!--]--></header><aside class="sidebar" data-v-3878e273><!----><!--[--><!--]--><ul class="sidebar-links" data-v-3878e273><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="#什么是-monorepo？">什么是 Monorepo？</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#单一代码库（monorepos）-vs-多代码库（multirepos）">单一代码库（monorepos） vs 多代码库（multirepos）</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#单一代码库的好处">单一代码库的好处</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#单一代码库的缺陷">单一代码库的缺陷</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#你应该使用单一代码库吗？">你应该使用单一代码库吗？</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#pnpm：最先进的包管理工具">pNpm：最先进的包管理工具</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#优势">优势</a><!----></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-05070b2b><div class="container" data-v-05070b2b><!--[--><!--]--><div style="position:relative;" class="content" data-v-05070b2b><div><h1 id="monorepo" tabindex="-1">Monorepo <a class="header-anchor" href="#monorepo" aria-hidden="true">#</a></h1><blockquote><p>由于谷歌在 Monorepo 上的实践，Monorepo 受到了越来越多的关注。Monorepo 意味着把所有项目的所有代码统一维护在一个单一的代码版本库中，和多代码库方案相比，两者各有优劣，需要根据公司文化和产品特性进行取舍。</p></blockquote><h2 id="什么是-monorepo？" tabindex="-1">什么是 Monorepo？ <a class="header-anchor" href="#什么是-monorepo？" aria-hidden="true">#</a></h2><p>Monorepo 的意思是在版本控制系统的单个代码库里包含了许多项目的代码。这些项目虽然有可能是相关的，但通常在逻辑上是独立的，并由不同的团队维护。</p><p>有些公司将所有代码存储在一个代码库中，由所有人共享，因此 Monorepos 可以非常大。例如，理论上谷歌拥有有史以来最大的代码库，每天有成百上千次提交，整个代码库超过 80 TB。其他已知运营大型单一代码库的公司还有微软、Facebook 和 Twitter。</p><h2 id="单一代码库（monorepos）-vs-多代码库（multirepos）" tabindex="-1">单一代码库（monorepos） vs 多代码库（multirepos） <a class="header-anchor" href="#单一代码库（monorepos）-vs-多代码库（multirepos）" aria-hidden="true">#</a></h2><p><img src="/w20220218/assets/8.f77a1aa6.png" alt=""></p><h2 id="单一代码库的好处" tabindex="-1">单一代码库的好处 <a class="header-anchor" href="#单一代码库的好处" aria-hidden="true">#</a></h2><ul><li>可见性：每个人都可以看到其他人的代码，这样可以带来更好的协作和跨团队贡献——不同团队的开发人员都可以修复代码中的 bug。</li><li>更简单的依赖关系管理：共享以来关系很简单，因为所有模块都托管在同一个存储库中。</li><li>唯一依赖源：每个依赖只有一个版本，意味着没有版本冲突。</li><li>一致性：当你把所有代码库放在一个地方时，执行代码质量标准和统一的风格会更容易。</li><li>共享时间线：API 和 共享库的变更会立即被暴露出来，迫使不同团队提前沟通合作，每个人都得努力跟上变化。</li><li>原子提交：开发人员可以在一次提交中更新多个包或项目。</li></ul><h2 id="单一代码库的缺陷" tabindex="-1">单一代码库的缺陷 <a class="header-anchor" href="#单一代码库的缺陷" aria-hidden="true">#</a></h2><ul><li>性能差：单一代码库难以扩大规模，像 <code>git blame</code> 这样的命令可能会不合理地花费很长时间执行，IDE 也开始变得缓慢，生产力受到影响，对每个提交测试整个 repo 变得不可行。</li><li>学习曲线：如果代码库包含了许多紧密耦合的项目，那么新成员的学习曲线会更陡峭。</li><li>大量的数据：单一代码库每天都要处理大量的数据和提交。</li><li>所有权：维护文件的所有权更有挑战性，因为像 Git 这样的系统没有内置的目录权限。</li><li>Code reviews：通知可能会变得非常嘈杂。例如，Github 有有限的通知设置，不适合大量的 pull request 和 code review。</li></ul><h2 id="你应该使用单一代码库吗？" tabindex="-1">你应该使用单一代码库吗？ <a class="header-anchor" href="#你应该使用单一代码库吗？" aria-hidden="true">#</a></h2><p>产品特点是决定因素！</p><p><img src="/w20220218/assets/10.e18dab7c.png" alt="DSCP"></p><p><img src="/w20220218/assets/11.3f50040e.png" alt="DBAA"></p><h2 id="pnpm：最先进的包管理工具" tabindex="-1">pNpm：最先进的包管理工具 <a class="header-anchor" href="#pnpm：最先进的包管理工具" aria-hidden="true">#</a></h2><p>英文里面的意思叫做 <code>performant npm</code>，意味着“高性能的 npm”，相较于 npm/yarn 两个常用的包管理工具在性能上有极大的提升，根据官方提供的数据可以看出在一些综合场景下比 npm/yarn 快了大概两倍：</p><p><img src="/w20220218/assets/9.a9eb6635.png" alt=""></p><p>相较于 yarn+lerna 更简单。</p><h2 id="优势" tabindex="-1">优势 <a class="header-anchor" href="#优势" aria-hidden="true">#</a></h2><ul><li>包安装速度极快</li><li>磁盘空间利用非常高校</li><li>支持 Monorepo</li><li>安全性高</li></ul></div></div><footer class="page-footer" data-v-05070b2b data-v-4f6b8e78><div class="edit" data-v-4f6b8e78><div class="edit-link" data-v-4f6b8e78 data-v-dc577608><!----></div></div><div class="updated" data-v-4f6b8e78><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"element-plus.md\":\"d73f783b\",\"index.md\":\"ce9aec13\",\"monorepo.md\":\"5bf38043\",\"npm.md\":\"34f671d0\",\"typescript.md\":\"f78cf784\",\"vue3_composition-api.md\":\"4000e149\",\"vue3_index.md\":\"6b97aa0f\"}")</script>
    <script type="module" async src="/w20220218/assets/app.b6032d24.js"></script>
    
  </body>
</html>